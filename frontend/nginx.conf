server {
    # 監聽端口 5173
    listen 5173;

    # 伺服器名稱
    server_name localhost;
    
    # 網站文件存放位置
    root /usr/share/nginx/html;

    # 默認首頁文件
    index index.html index.htm;
    
    # 處理 SPA 路由
    location / {
        # 嘗試檢索文件，如果找不到，則重定向到 index.html
        # 比如訪問 /about，則嘗試檢索 /about.html，如果找不到，則重定向到 /index.html
        try_files $uri $uri/ /index.html;
    }
    
    # 靜態資源緩存
    # 圖片, CSS, JS 等文件會被緩存 1 年（提升網站加載速度）
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
    
    # 安全標頭
    # 防止網站被嵌入到其他網站的 iframe 中
    # 防止瀏覽器猜測文件類型
    # 啟動 XSS 保護（防止 XSS 攻擊）
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    
    # Gzip 壓縮（減少文件大小，提升加載速度）
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/javascript application/xml+rss application/json;
}
